---
import Layout from '../../layouts/Layout.astro';
import Main from '../../components/Main.astro';

import {Image} from "astro:assets"
import  {getCollection, CollectionEntry} from "astro:content"

export const getStaticPaths = async () => {
    const posts = await getCollection("posts");

    const paths = posts.map((post) => ({
        params: { slug: post.slug },
        props: { post },
    }));
    return paths;
}
type Props = {
    post: CollectionEntry<"posts">
};

const {post} = Astro.props;
const {Content} = await post.render();
---


<Layout title="Welcome to Astro.">
	<Main>
		<h1>{post.data.title}</h1>
        <Image
            src={post.data.image}
            alt={post.data.title}
            width={1024}
            height={1024 / 2}
            format="webp"
            class="rounded-2xl shadow-xl mb-28 object-cover"
        />
        <div class="prose prose-2xl overflow-visible relative mb-20">
            <Content />
        </div>
	</Main>
</Layout>
